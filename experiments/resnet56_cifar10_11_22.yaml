# mctl yaml
image: mosaicml/research:latest
parameters:
  instance_types:
  - cota-g8-3080
  seed:
  - 5
  workers_per_gpu:
  - 8

  callbacks: # List of: profiler, speed_monitor, lr_monitor, classifier_metrics
  - speed_monitor lr_monitor

  schedulers.warmup.warmup_iters:
  - "5ep"
  schedulers.warmup.warmup_method: 
  - linear
  schedulers.warmup.warmup_factor: 
  - 0
  schedulers.warmup.verbose: 
  - false
  schedulers.warmup.interval: 
  - step
  schedulers.cosine_warmrestart.T_0:
  - "10ep"
  schedulers.cosine_warmrestart.eta_min: 
  - 0.001
  schedulers.cosine_warmrestart.interval: 
  - step

command: >-
  git clone git@github.com:jacobfulano/composer

  cd composer

  git checkout clr_runs

  pip install -e .
  pip install wandb
  pip install --upgrade yahp
  
  python examples/run_mosaic_trainer.py -f composer/yamls/models/resnet56_cifar10_clr.yaml --loggers wandb --loggers.wandb.project jacob_test --loggers.wandb.name test_run --callbacks.speed_monitor.window_size 10
